machine:
  node:
    version: 4

  environment:
    TRAVIS_OS_NAME: linux
    JOBS: 2

dependencies:
  override:
    - ./platform/linux/scripts/install.sh

test:
  override:
    - scripts/circleci-matrix --config circle-matrix.yml:
        parallel: true

general:
  artifacts:
    - "node_modules/mapbox-gl-test-suite/render-tests/index.html"

deployment:
  node:
    tag: /node-v[0-9]+\.[0-9]+\.[0-9]+/
    commands:
      - ./platform/node/scripts/deploy.sh
